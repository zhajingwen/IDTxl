# 加密货币网络分析系统 - 问题解决方案

## 问题描述
运行 `python test_crypto_analysis.py` 时出现错误：
```
ModuleNotFoundError: No module named 'statsmodels'
```

## 问题分析

### 1. 项目结构理解
这是一个基于IDTxl的**加密货币市场网络分析系统**，主要功能包括：
- 从Hyperliquid API获取加密货币价格数据
- 使用IDTxl进行网络分析（传递熵、互信息等）
- 识别高度关联的资产组合
- 生成可视化报告

### 2. 问题根源
- IDTxl的 `stats.py` 模块需要 `statsmodels` 包进行FDR校正
- 项目的依赖配置文件中缺少 `statsmodels` 依赖
- 系统使用外部管理的Python环境，需要使用uv包管理器

### 3. 依赖关系分析
IDTxl需要以下核心依赖：
- `statsmodels` - 用于统计检验和FDR校正
- `h5py` - 用于数据存储
- `networkx` - 用于网络分析
- `mpmath` - 用于高精度数学计算
- `prettytable` - 用于表格显示
- `ecos` - 用于优化算法

## 解决方案

### 1. 安装缺失的依赖
```bash
cd /Users/test/Documents/IDTxl
uv add statsmodels h5py networkx mpmath prettytable ecos
```

### 2. 更新依赖配置文件
更新了 `requirements_crypto.txt` 和 `pyproject.toml`，包含所有必要的依赖：

```txt
# 核心依赖
idtxl>=1.6
numpy>=1.21.0
pandas>=1.3.0
scipy>=1.7.0
statsmodels>=0.14.0
h5py>=3.0.0
networkx>=3.0.0

# 数据处理
requests>=2.25.0
matplotlib>=3.5.0
seaborn>=0.11.0

# IDTxl可选依赖
mpmath>=1.3.0
prettytable>=3.16.0
ecos>=2.0.0
```

### 3. 验证解决方案
创建了 `test_basic_functionality.py` 测试脚本，验证：
- ✅ IDTxl核心模块导入成功
- ✅ 加密货币分析器导入成功  
- ✅ IDTxl基本功能正常
- ✅ statsmodels功能正常

## 使用方法

### 运行基本功能测试
```bash
uv run python test_basic_functionality.py
```

### 运行完整测试
```bash
uv run python test_crypto_analysis.py
```

### 运行主程序
```bash
uv run python crypto_network_analysis.py
```

## 项目特点

### 1. 技术栈
- **IDTxl**: 信息论工具包，用于网络推断和节点动力学分析
- **Hyperliquid API**: 获取实时加密货币数据
- **NetworkX**: 网络分析和可视化
- **Matplotlib/Seaborn**: 数据可视化
- **Statsmodels**: 统计检验和FDR校正

### 2. 核心功能
- **多元传递熵分析**: 识别资产间的信息流动
- **多元互信息分析**: 测量资产间的相互依赖
- **网络推断**: 构建加密货币市场网络
- **资产组合识别**: 发现高度关联的资产组合

### 3. 应用场景
- 加密货币市场分析
- 投资组合优化
- 风险管理
- 市场结构研究

## 注意事项

1. **环境管理**: 项目使用uv包管理器，确保使用 `uv run` 前缀运行Python脚本
2. **API限制**: Hyperliquid API可能有访问限制，建议在生产环境中添加适当的错误处理
3. **计算资源**: IDTxl分析可能需要大量计算资源，建议在性能测试中调整参数
4. **数据质量**: 确保获取的数据质量良好，避免缺失值和异常值影响分析结果

## 后续优化建议

1. **错误处理**: 增强API调用的错误处理和重试机制
2. **性能优化**: 使用GPU加速或MPI并行计算提高分析速度
3. **数据缓存**: 实现数据缓存机制减少API调用
4. **配置管理**: 添加配置文件支持，便于参数调整
5. **监控日志**: 完善日志记录和监控系统

## 总结

通过系统性地分析项目依赖关系，识别并解决了 `statsmodels` 缺失的问题。现在系统可以正常运行，所有核心功能都已验证通过。项目具备了完整的加密货币网络分析能力，可以用于实际的市场分析和研究。
